# Linux 修改DNS 服务器配置

_2019-07-04_ _09:02_

最近遇到个坑。

修改DNS 服务器。随便一查，说是改`/etc/resolv.conf`，加上`nameserver xxx.xxx.xxx.xxx`即可。话不多说，改之，测试，生效。然后就没多管了。

有一天，服务器重启了，然后DNS 解析失效了！一查，`/etc/resolv.conf` 之前的配置居然没了。不可思议，仔细一看，文件多了一行`# Generated by NetworkManager`。猜测是服务器重启之后重置了resolv.conf 文件。一顿查，终于发现修改DNS 服务器的正确姿势。

```
# 查看配置文件。这个配置文件发现不同的机器上文件名并不一致，比如有些服务器会是`ifcfg-eno16780032`
vi /etc/sysconfig/network-scripts/ifcfg-eth0
# 添加DNS服务器地址到配置文件中
DNS1=114.114.114.114
DNS2=8.8.8.8
# 重启网络服务
service network restart
```

然后再查看`/etc/resolv.conf`，就会发现DNS配置已经被写进来了。